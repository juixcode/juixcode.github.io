const items_dictionary = 
[[
    [
        [
            "[‚ùì] Ta plus grande peur ?", 
            "[‚ùì] Un plat que tu pourrais manger 10j d'affil√©e ?", 
            "[‚ùì] Ton voyage de r√™ve ?", 
            "[‚ùì] Ton m√©tier de r√™ve ?", 
            "[‚ùì] Ta musique pr√©f√©r√©e ?", 
            "[‚ùì] Ton activit√© pr√©f√©r√©e ?", 
            "[‚ùì] La chose la plus folle que tu aies jamais faite ?", 
            "[‚ùì] Quelle c√©l√©brit√© aimerais-tu rencontrer ?",
            "[‚ùì] Si tu pouvais avoir un super pouvoir, lequel ?",
            "[‚ùì] Ce que tu aimes dans le groupe ici pr√©sent",
            "[‚ùì] C'est quoi le plus gros green flag chez un mec/une meuf ?",
            "[‚ùì] C'est quoi le plus gros red flag chez un mec/une meuf ?",
            "[‚ùì] Quelque chose que tu adores",
            "[‚ùì] Un truc que tu d√©testes",
            "[‚ùì] Ton avis sur la pizza √† l'ananas ?",
            "[‚ùì] C√©r√©ales avant ou apr√®s le lait ?",
            "[‚ùì] C'est quoi ton jeu vid√©o/sport pr√©f√©r√© ?",
        ],[
            "[üë•] Avec qui tu aimerais passer davantage de temps √† l'avenir ?",
            "[üë•] Qui aimerais-tu d√©couvrir davantage ?",
            "[üë•] Qui te pla√Æt le plus physiquement ?",
            "[üë•] Qui te semble le plus sympa ?",
        ],[
            "[‚òùÔ∏è] Montre-nous ta meilleure danse bien g√™nante pendant 10s",
            "[‚òùÔ∏è] Assieds-toi par terre jusqu'√† ton prochain tour"
        ]
    ],[
        [
            "[‚ùì] Une qualit√© indispensable pour √™tre ton/ta partenaire ?",
            "[‚ùì] Une qualit√© indispensable pour √™tre ton/ta pote ?",
            "[‚ùì] Un d√©faut qu'il ne faut surtout pas avoir pour tra√Æner avec toi ?",
            "[‚ùì] Un regret marquant ?",
            "[‚ùì] Un remord tracassant ?",
            "[‚ùì] Sur une √©chelle de 1 √† 10, √† quel point es-tu gay ?",
            "[‚ùì] Tu pourrais retourner avec un(e) de tes exs ?",
        ],[
            "[üë•] Sur une √©chelle de 1 √† 10, √† quel point la personne √† ta gauche est-elle gay ?",
            "[üë•] Si tu devais choisir un adjectif pour d√©crire la personne en face de toi parmi : gay, p√©dophile, trisomique ?",
            "[üë•] Avoue un petit d√©faut √† la personne √† ta droite",
            "[üë•] Trouve une qualit√© √† la personne deux places √† ta gauche",
            "[üë•] Ce que tu pr√©f√®res chez la personne la plus loin de toi",
            "[üë•] Tu partirais o√π 1an avec la personne √† ta gauche ?",
            "[üë•] Une personne avec qui tu pourrais vivre 1 an sans souci ?",
            "[üë•] La personne avec laquelle tu pourrais le moins te disputer ?",
            "[üë•] La personne avec laquelle tu pourrais le plus √™tre en couple ?",
            "[üë•] La personne avec laquelle tu pourrais le plus parler librement ?",
            "[üë•] La personne √† laquelle tu peux confier d'importants secrets ?",
        ],[
            "[‚òùÔ∏è] Fais un c√¢lin √† quelqu'un dont tu en as tr√®s envie",
            "[‚òùÔ∏è] D√©voile une particularit√© physique"
        ]
    ],[
        [
            "[‚ùì] Un f√©tiche ?",
            "[‚ùì] L'endroit o√π tu r√™verais de faire l'amour",
            "[‚ùì] L'endroit le plus insolite o√π tu t'es masturb√© ?",
            "[‚ùì] Ta plus grande honte pendant une branlette",
            "[‚ùì] La dur√©e de ta plus longue branlette",
            "[‚ùì] Une anecdote marquante √† propos d'une de tes branlettes",
            "[‚ùì] Une c√©l√©brit√© que tu d√©truirais ?",
            "[‚ùì] La couleur de ton sous-v√™tement ?",
            "[‚ùì] Ta cat√©gorie porno pr√©f√©r√©e ?",
            "[‚ùì] T'as d√©j√† envoy√© ou re√ßu une nude ?",
            "[‚ùì] T'as d√©j√† entendu un membre de ta famille ou voisin ken ?",
        ],[
            "[üë•] Qui a le plus beau cul ici ?",
            "[üë•] La personne avec laquelle tu pourrais regarder un porno ?",
            "[üë•] La personne √† laquelle tu pourrais partager ton historique ?",
            "[üë•] La personne qui ken le mieux selon toi ?",
            "[üë•] Le mec qui se d√©crypte le plus le Hugo ?",
            "[üë•] La personne qui restera le plus longtemps vierge ?"
        ],[

        ]
    ],[
        [
            "[‚ùì] Domin√©(e), √ßa te ferait kiffer ?",
            "[‚ùì] La taille ton sexe/poitrine ?",
            "[‚ùì] Une position pref ?",
            "[‚ùì] Un fantasme de th√®me comme les nurses, nekos, ou menottes ?",
            "[‚ùì] Un r√™ve √©rotique avec quelqu'un d'ici √ßa t'est arriv√© ?",
            "[‚ùì] Classe par pr√©f√©rence : Sexe vaginal ; oral ; anal",
            "[‚ùì] D√©cris ton sexe",
        ],[
            "[üë•] Avoue le meilleur argument qu'a la personne en face de toi",
            "[üë•] La personne 3 places √† ta droite est √† toi. Tu lui ferais quoi ?",
            "[üë•] Coucher avec la personne la plus loin de toi ou orgie tous ensemble ?",
            "[üë•] Avec qui tu ne pourrais absolument pas coucher ?",
            "[üë•] Coucher avec les 2 personnes de ton choix ou rien ?",
            "[üë•] Sodomiser la personne √† ta gauche ou perdre 250‚Ç¨ ?",
            "[üë•] Te faire sodomiser par la personne √† ta droite ou la sodomiser 2x ?"
        ],[

        ]
    ]
],[
    [
        [
            "[‚ùì] La tua pi√π grande paura?", 
            "[‚ùì] Un piatto che potresti mangiare per 10 volte di seguito?", 
            "[‚ùì] Il viaggio dei tuoi sogni?", 
            "[‚ùì] Il lavoro dei tuoi sogni?", 
            "[‚ùì] La tua musica preferita?", 
            "[‚ùì] La tua attivit√† preferita?", 
            "[‚ùì] La cosa pi√π pazza che hai fatto?", 
            "[‚ùì] Quale celebrit√† vorresti incontrare?",
            "[‚ùì] Se potessi avere un superpotere, quale sarebbe?",
            "[‚ùì] Cosa ti piace della band qui presente",
            "[‚ùì] Qual √® la pi√π grande bandiera verde in un ragazzo/una ragazza?",
            "[‚ùì] Qual √® la pi√π grande bandiera rossa in un ragazzo/una ragazza?",
            "[‚ùì] Qualcosa che ami",
            "[‚ùì] Qualcosa che odi",
            "[‚ùì] La tua opinione sulla pizza all'ananas?",
            "[‚ùì] Cereali prima o dopo il latte?",
            "[‚ùì] Qual √® il tuo videogioco/sport preferito?",
        ],[
            "[üë•] Con chi vorresti passare pi√π tempo in futuro?",
            "[üë•] Chi vorresti scoprire di pi√π?",
            "[üë•] Chi ti piace di pi√π fisicamente?",
            "[üë•] Chi trovi pi√π simpatico?",
        ],[
            "[‚òùÔ∏è] Mostraci il tuo miglior ballo imbarazzante per 10s",
            "[‚òùÔ∏è] Siediti a terra fino al prossimo turno"
        ]
    ],[
        [
            "[‚ùì] Una qualit√† indispensabile per essere il vostro/la vostra partner?",
            "[‚ùì] Una qualit√† indispensabile per essere il vostro/la vostra compagno/a?",
            "[‚ùì] Un difetto che non devi assolutamente avere per frequentarti?",
            "[‚ùì] Un rimpianto notevole?",
            "[‚ùì] Un rimorso assillante?",
            "[‚ùì] Su una scala da 1 a 10, quanto sei gay?",
            "[‚ùì] Potresti tornare insieme a uno dei tuoi ex?",
        ],[
            "[üë•] Su una scala da 1 a 10, quanto √® gay la persona alla tua sinistra?",
            "[üë•] Se dovessi scegliere un aggettivo per descrivere la persona di fronte a te tra: gay, pedofilo, sindrome di Down?",
            "[üë•] Ammetti un piccolo difetto alla persona alla tua destra",
            "[üë•] Trova una qualit√† nella persona che si trova due posti alla tua sinistra",
            "[üë•] Cosa ti piace di pi√π della persona pi√π lontana da te",
            "[üë•] Dove andresti 1 anno con la persona alla tua sinistra?",
            "[üë•] Una persona con cui potresti vivere 1 anno senza preoccupazioni?",
            "[üë•] La persona con cui potresti discutere di meno?",
            "[üë•] La persona con cui potresti avere pi√π relazioni?",
            "[üë•] La persona con cui potresti parlare pi√π liberamente?",
            "[üë•] La persona a cui puoi confidare segreti importanti?",
        ],[
            "[‚òùÔ∏è] Abbraccia qualcuno che vuoi davvero",
            "[‚òùÔ∏è] Rivela una particolarit√† fisica"
        ]
    ],[
        [
            "[‚ùì] Un feticcio?",
            "[‚ùì] Il luogo dove si sogna di fare l'amore",
            "[‚ùì] Il posto pi√π insolito in cui ti sei masturbato?",
            "[‚ùì] La tua pi√π grande vergogna durante una sega",
            "[‚ùì] La lunghezza della tua pi√π lunga sega",
            "[‚ùì] Un aneddoto memorabile su una delle tue seghe",
            "[‚ùì] Una celebrit√† che distruggeresti?",
            "[‚ùì] Il colore della tua biancheria intima?",
            "[‚ùì] La tua categoria porno preferita?",
            "[‚ùì] Hai mai inviato o ricevuto un nudo?",
            "[‚ùì] Hai mai sentito un familiare o un vicino di casa fare ken?",
        ],[
            "[üë•] Chi ha il miglior culo qui intorno?",
            "[üë•] La persona con cui potresti guardare un porno?",
            "[üë•] La persona con cui potresti condividere la tua storia?",
            "[üë•] La persona che ritieni migliore?",
            "[üë•] La persona che decifra meglio l'Hugo?",
            "[üë•] La persona che rimarr√† vergine pi√π a lungo?"
        ],[

        ]
    ],[
        [
            "[‚ùì] Dominato, questo ti farebbe diventare kiffer?",
            "[‚ùì] Le dimensioni del tuo sesso/torace?",
            "[‚ùì] Una posizione preferita?",
            "[‚ùì] Una fantasia a tema come infermiere, neko o manette?",
            "[‚ùì] Un sogno erotico con qualcuno di qui, ti √® mai capitato?",
            "[‚ùì] Classificazione per preferenze: sesso vaginale; orale; anale",
            "[‚ùì] Descrivi il tuo sesso",
        ],[
            "[üë•] Confessa il miglior argomento della persona che hai di fronte",
            "[üë•] La persona 3 posti alla tua destra √® tua. Cosa gli faresti?",
            "[üë•] Dormi con la persona pi√π lontana da te o fai un'orgia tutti insieme?",
            "[üë•] Con chi non andresti assolutamente a letto?",
            "[üë•] Dormire con le due persone a tua scelta o niente?",
            "[üë•] Sodomizzare la persona alla tua sinistra o perdere 250‚Ç¨?",
            "[üë•] Fatti sodomizzare dalla persona alla tua destra o sodomizzala 2 volte?"
        ],[

        ]
    ]
]];

var items_fr = [];
var items_it = [];
window.onload = setItems;

var items = items_fr;
var counter = 0;
var delay = 0;

function play() { //Passe √† la question suivante avec animation de Pop
    // counter++;
    // if (counter > items.length-1) {
    //     counter = 0;
    // }
    counter = Math.floor(Math.random() * items.length);
    
    document.getElementById("show").innerHTML = items[counter];
    new Audio("tic.mp3").play();

    document.getElementById("show").className = "text";
    window.requestAnimationFrame(function (time) {
        window.requestAnimationFrame(function (time) {
            document.getElementById("show").className = "text active";
        });
    });
}

function done() { //Roll final : audio + apparition de la traduction (option 2)
    new Audio("done.mp3").play();
    if (document.getElementById('option-2').checked){
        tradRefresh();
        document.getElementById("trad").className = "text trad active";
    }
    if (!(document.getElementById('option-3').checked)){ //Suppression auto des questions d√©j√† pos√©es
        items_fr.splice(counter, 1);
        items_it.splice(counter, 1);
        items.splice(counter, 1);
    }
    if (items.length <= 1){ //R√©initialisation des questions si toutes ont √©t√© pos√©es
        setItems()
    }
}

function tradRefresh() { //Affichage de la traduction (option 2)
    if (document.querySelector('button.lang').className.match('fr')) { 
        document.getElementById("trad").innerHTML = items_it[counter];
    } else {
        document.getElementById("trad").innerHTML = items_fr[counter];
    }
}
function enableTrad(){ //Cache la traduction √† la (d√©s)activation de l'option 2
    document.getElementById("trad").className = "text trad";
}

function start(){ //Bouton Lancer : lance les rolls al√©atoires avec d√©lais
    if (document.getElementById('option-2').checked){
        document.getElementById("trad").className = "text trad";
    }
    if (document.getElementById('option-1').checked){
        counter = Math.floor(Math.random() * items.length);
        setTimeout(play, 0);
        setTimeout(done, 100);
    } else {
        delay = Math.floor(Math.random() * (50 - 10)) + 10;
        // coef = (Math.floor(Math.random() * (125 - 105)) + 105)/100
        coef = document.querySelector('.coef_value').offsetWidth/100;
        console.log("coef: " + coef);
        counter = Math.floor(Math.random() * items.length);
        console.log("starting choice: " + items[counter]);

        setTimeout(play, 0);
        while ((delay*coef+10)-delay < 1000) {
            setTimeout(play, delay);
            // console.log("delay: " + delay);
            delay = delay*coef + 10;
            coef+=0.002;
        }
        setTimeout(play, delay);
        setTimeout(done, delay+1000);
        console.log("last delay: " + delay);
    }
}

function switchLang() { //Bouton de Langue : intervertis les deux langues
    document.querySelector('button.lang').classList.toggle('it');
    document.querySelector('button.lang').classList.toggle('fr');
    
    refreshLang();
    if (document.getElementById("show").innerHTML !== " ‚Äé ") {
        document.getElementById("show").innerHTML = items[counter];

        if (document.getElementById('option-2').checked){
            tradRefresh();
        }
    }
}
function refreshLang() { //Actualise les questions selon la langue choisie
    if (document.querySelector('button.lang').className.match('fr')) { 
        items = items_fr;
    } else {
        items = items_it;
    }

    // console.log(items)
}

function hamburgerDeploy() { //Ouvre/Ferme le volet d'options
    const hamburger = document.querySelector('.hamburger')
    const hamburger_menu = document.querySelector('.hamburger_menu')

    hamburger.classList.toggle('active');
    hamburger_menu.classList.toggle('active');
}

function setItems(){ //Actualise la liste des questions en fonction des s√©lections
    document.getElementById("show").innerHTML = " ‚Äé ";
    document.getElementById("trad").innerHTML = " ‚Äé ";

    items_fr = [] ; items_it=[];

    // c = category   ;   f = filter   ;   i = item
    // items_dictionary [lang] [category] [filter] [item]
    for (let c = 0; c < 4; c++) { // <--- number of categories
        if (document.getElementById("categories").children[c].children[0].checked){

            for (let f = 0; f < 3; f++) { // <--- number of filters
                if (document.getElementById("filters").children[f].children[0].checked){

                    for (let i = 0; i < items_dictionary[0][c][f].length; i++) {
                        items_fr.push(items_dictionary[0][c][f][i]);
                        items_it.push(items_dictionary[1][c][f][i]);
                    };
                };
            };
        };
    };

    refreshLang();
}